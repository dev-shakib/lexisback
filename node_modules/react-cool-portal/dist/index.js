"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("react-dom"),t=function(n){var t=e.useRef(n);return t.current=n,t},r=function(e,n){void 0===n&&(n=100);var t=setTimeout((function(){clearTimeout(t),e()}),n)},u=function(e){return Array.isArray(e)?e.every((function(e){return!Array.from(document.getElementsByClassName(e)).length})):e},o=function(t,u,o,c,i){return function(a){var d=a.children,l=e.useState(),s=l[0],f=l[1];return e.useEffect((function(){return o?(f(document.getElementById(t)||function(e){var n=document.createElement("div");return n.setAttribute("id",e),document.body.appendChild(n),n}(t)),function(){s&&r((function(){u&&""===s.innerHTML&&s.remove()}))}):function(){return null}}),[s]),e.useEffect((function(){if(!o||!s)return function(){return null};var e=!1,n=function(n){e=!s.contains(n.target)},t=function(n){e&&c(n)},r=function(e){"Escape"===e.key&&i(e)};return c&&(document.addEventListener("mousedown",n),document.addEventListener("click",t)),i&&document.addEventListener("keydown",r),function(){c&&(document.removeEventListener("mousedown",n),document.removeEventListener("click",t)),i&&document.removeEventListener("keydown",r)}}),[s]),o&&s?n.createPortal(d,s):null}};exports.default=function(n){var c=void 0===n?{}:n,i=c.containerId,a=void 0===i?"react-cool-portal":i,d=c.autoRemoveContainer,l=void 0===d||d,s=c.defaultShow,f=void 0===s||s,v=c.clickOutsideToHide,m=void 0===v||v,k=c.escToHide,y=void 0===k||k,E=c.internalShowHide,p=void 0===E||E,w=c.onShow,C=c.onHide,b=e.useState(f),h=b[0],L=b[1],g=e.useRef(!1),S=t(w),H=t(C),T=e.useRef(f),A=e.useCallback((function(){m&&(g.current=!0,r((function(){g.current=!1})))}),[m]),R=e.useCallback((function(e){A(),T.current||(L(!0),T.current=!0,S.current&&S.current(e))}),[S,A]),x=e.useCallback((function(e){A(),T.current&&(L(!1),T.current=!1,H.current&&H.current(e))}),[H,A]),I=e.useCallback((function(e){T.current?x(e):R(e)}),[x,R]),P=e.useCallback((function(e){g.current||("click"===e.type&&u(m)||"keydown"===e.type&&u(y))&&x(e)}),[x]);return{Portal:e.useCallback(o(a,l,!p||h,P,P),[p,h]),isShow:h,show:R,hide:x,toggle:I}},exports.defaultContainerId="react-cool-portal";
